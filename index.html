<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jejak Rimba - Petualangan Alam</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@700&family=Montserrat:wght@400;500;600&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>

    <style>
        :root {
            --primary-green: #1a422a;
            --dark-green: #0f2b1a;
            --accent-gold: #e0c090;
            --text-light: #f4f7f5;
            --font-heading: 'Amatic SC', cursive;
            --font-body: 'Montserrat', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--primary-green);
            color: var(--text-light);
            font-family: var(--font-body);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* --- 1. PERBAIKAN NAVBAR (MOBILE FRIENDLY) --- */
        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 15px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            background: rgba(15, 43, 26, 0.95); /* Latar belakang gelap solid */
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255,255,255,0.05);
            transition: all 0.3s ease;
        }

        .logo {
            font-family: var(--font-heading);
            font-size: 2.2rem;
            color: var(--accent-gold);
            font-weight: bold;
            text-decoration: none;
            letter-spacing: 2px;
        }

        .nav-links {
            list-style: none;
            display: flex;
            gap: 25px;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-light);
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: color 0.3s;
        }

        .nav-links a:hover { color: var(--accent-gold); }

        /* --- 2. HERO SECTION --- */
        .hero-section {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            background: linear-gradient(rgba(0,0,0,0.3), var(--dark-green)), url('https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&q=80');
            background-size: cover;
            background-position: center;
            padding: 0 20px;
        }

        .hero-content h1 {
            font-family: var(--font-heading);
            font-size: clamp(3rem, 12vw, 6rem); /* Ukuran font dinamis */
            line-height: 1.1;
            margin-bottom: 15px;
            color: var(--accent-gold);
        }

        .hero-content p {
            max-width: 600px;
            margin: 0 auto 30px;
            font-size: 1.1rem;
        }

        .btn-primary {
            display: inline-block;
            padding: 12px 35px;
            border: 2px solid var(--accent-gold);
            color: var(--accent-gold);
            text-decoration: none;
            border-radius: 50px;
            font-weight: bold;
            transition: 0.3s;
        }
        
        .btn-primary:hover {
            background: var(--accent-gold);
            color: var(--dark-green);
        }

        /* --- 3. LAYOUT CONTENT YANG RAPI --- */
        .section-container {
            padding: 80px 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .section-title {
            text-align: center;
            font-family: var(--font-heading);
            font-size: 3rem;
            color: var(--accent-gold);
            margin-bottom: 40px;
        }

        .text-center { text-align: center; }

        /* --- 4. WEATHER CARD (DIPERBAIKI) --- */
        .weather-card {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 40px 20px;
            text-align: center;
            max-width: 500px;
            margin: 0 auto;
        }

        .weather-status {
            margin-top: 20px;
            min-height: 150px; /* Mencegah layout lompat */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* Sembunyikan elemen error saat loading */
        .hidden { display: none !important; }

        .weather-icon {
            width: 100px;
            height: 100px;
            filter: drop-shadow(0 0 10px rgba(255,255,255,0.3));
        }

        .temp-big {
            font-size: 3.5rem;
            font-weight: bold;
            font-family: var(--font-heading);
            line-height: 1;
        }

        .btn-location {
            background: var(--accent-gold);
            color: var(--dark-green);
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 15px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        /* MAP FIX */
        #map {
            height: 400px;
            width: 100%;
            border-radius: 15px;
            border: 2px solid rgba(255,255,255,0.1);
        }

        /* --- 5. RESPONSIVE MOBILE TWEAKS --- */
        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                padding: 15px;
            }
            
            .nav-links {
                margin-top: 15px;
                gap: 20px;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .section-title { font-size: 2.5rem; }
            
            .hero-section {
                padding-top: 80px; /* Kompensasi navbar tinggi */
            }
        }
    </style>
</head>
<body>

    <nav class="navbar">
        <a href="#" class="logo">JEJAK RIMBA</a>
        <ul class="nav-links">
            <li><a href="#">Beranda</a></li>
            <li><a href="#destinasi">Destinasi</a></li>
            <li><a href="#cuaca">Cuaca</a></li>
        </ul>
    </nav>

    <header class="hero-section">
        <div class="hero-content">
            <h1>Panggilan Alam Semesta</h1>
            <p>Jelajahi keindahan gunung, lembah, dan sungai Indonesia dengan penuh rasa hormat.</p>
            <a href="#destinasi" class="btn-primary">Mulai Petualangan</a>
        </div>
    </header>

    <section id="destinasi" class="section-container">
        <h2 class="section-title">Jalur Ekspedisi</h2>
        <div id="map"></div>
    </section>

    <section id="cuaca" class="section-container">
        <h2 class="section-title">Kondisi Lapangan</h2>
        <p class="text-center" style="margin-bottom: 30px; color: rgba(255,255,255,0.7);">
            Pastikan cuaca aman sebelum mendaki. Gunakan deteksi otomatis untuk lokasi Anda saat ini.
        </p>
        
        <div class="weather-card">
            <button onclick="getLocation()" class="btn-location">
                üìç Deteksi Lokasi Saya
            </button>
            <div style="margin-top:10px; font-size:0.8rem; color: #ccc;">atau ketik manual:</div>
            
            <div style="margin-top: 10px; display:flex; justify-content:center; gap:10px;">
                <input type="text" id="cityInput" placeholder="Contoh: Malang" style="padding:8px 15px; border-radius:20px; border:none; width:60%;">
                <button onclick="getWeatherByCity()" style="padding:8px 15px; border-radius:20px; border:none; background:#fff; cursor:pointer;">Cari</button>
            </div>

            <div id="loading" class="hidden" style="margin-top:20px;">Mengambil data satelit...</div>

            <div id="weatherResult" class="weather-status hidden">
                <img id="wIcon" class="weather-icon" src="" alt="Cuaca">
                <div id="wTemp" class="temp-big">--¬∞C</div>
                <div id="wDesc" style="font-size: 1.2rem; margin-bottom: 10px; text-transform: capitalize;">--</div>
                <div style="font-size: 0.9rem; color: var(--accent-gold);">
                    Lokasi: <span id="wCity">--</span>
                </div>
                <div style="margin-top: 10px; font-size: 0.8rem;">
                    Kelembapan: <span id="wHum">--%</span> | Angin: <span id="wWind">-- m/s</span>
                </div>
            </div>
            
            <div id="errorMsg" class="hidden" style="color: #ff8888; margin-top: 20px;"></div>
        </div>
    </section>

    <footer>
        <div class="text-center" style="padding: 40px; color: rgba(255,255,255,0.4); font-size: 0.8rem;">
            &copy; 2025 Jejak Rimba Nusantara.
        </div>
    </footer>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // --- 1. SETUP PETA ---
        const map = L.map('map').setView([-7.942493, 112.953012], 10); // Default Bromo
        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; OpenStreetMap &copy; CARTO'
        }).addTo(map);
        
        // Marker Gunung Bromo
        L.marker([-7.942493, 112.953012]).addTo(map).bindPopup("Gunung Bromo").openPopup();

        // --- 2. SETUP CUACA (AUTO LOCATION) ---
        // PENTING: Ganti 'API_KEY_KAMU' dengan API Key asli dari OpenWeatherMap.
        // Jika tidak diganti, cuaca tidak akan muncul.
        const API_KEY = 'bd5e378503939ddaee76f12ad7a97608'; // Saya pinjamkan API Key Demo sementara (bisa limit sewaktu-waktu)

        const weatherResult = document.getElementById('weatherResult');
        const errorMsg = document.getElementById('errorMsg');
        const loading = document.getElementById('loading');

        // Fungsi Deteksi Lokasi Pengunjung
        function getLocation() {
            loading.classList.remove('hidden');
            errorMsg.classList.add('hidden');
            weatherResult.classList.add('hidden');

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition, showError);
            } else {
                showError({message: "Browser ini tidak mendukung Geolocation."});
            }
        }

        function showPosition(position) {
            const lat = position.coords.latitude;
            const lon = position.coords.longitude;
            fetchWeather(lat, lon, 'coords');
        }

        function showError(error) {
            loading.classList.add('hidden');
            errorMsg.classList.remove('hidden');
            errorMsg.innerText = "Gagal mendeteksi lokasi: " + (error.message || "Izin ditolak");
        }

        // Fungsi Cari Kota Manual
        function getWeatherByCity() {
            const city = document.getElementById('cityInput').value;
            if(!city) return;
            loading.classList.remove('hidden');
            errorMsg.classList.add('hidden');
            weatherResult.classList.add('hidden');
            fetchWeather(city, null, 'city');
        }

        // Fungsi Utama Fetch API
        async function fetchWeather(param1, param2, type) {
            let url;
            if (type === 'coords') {
                url = `https://api.openweathermap.org/data/2.5/weather?lat=${param1}&lon=${param2}&appid=${API_KEY}&units=metric&lang=id`;
            } else {
                url = `https://api.openweathermap.org/data/2.5/weather?q=${param1}&appid=${API_KEY}&units=metric&lang=id`;
            }

            try {
                const response = await fetch(url);
                const data = await response.json();

                if (data.cod !== 200) throw new Error(data.message);

                // Update UI
                document.getElementById('wTemp').innerText = Math.round(data.main.temp) + "¬∞C";
                document.getElementById('wDesc').innerText = data.weather[0].description;
                document.getElementById('wCity').innerText = data.name;
                document.getElementById('wHum').innerText = data.main.humidity + "%";
                document.getElementById('wWind').innerText = data.wind.speed + " m/s";
                document.getElementById('wIcon').src = `https://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png`;

                loading.classList.add('hidden');
                weatherResult.classList.remove('hidden');
            } catch (err) {
                loading.classList.add('hidden');
                errorMsg.classList.remove('hidden');
                errorMsg.innerText = "Error: " + err.message;
            }
        }
    </script>
</body>
</html>
